<!DOCTYPE html>
<html>
<head>
    <title>Live Transactions</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
    <style>
        li {
            margin-bottom: 10px;
            list-style-type: none;
            width: 100%;
            border: solid 1px black;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }

        table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        table tr:nth-child(odd) {
            background-color: #ffffff;
        }
        th, td {
            border: 1px solid black;
            padding: 5px;
            text-align: left;
        }

    </style>
</head>
<body>
    <h1>Live Transactions</h1>
    <div style="height: 50vh; overflow: auto;">

    <table id="transaction-table">
        <tr>
            <th>CC Number</th>
            <th>Amount</th>
            <th>Zip</th>
            <th>Latitude</th>
            <th>Longitude</th>
            <th>Transaction Number</th>
            <th>Is Fraud</th>
            <th>Transaction Date</th>
            <th>Transaction Time</th>
        </tr>
    </table>
</div>

    <script>
        var socket = io.connect('http://' + document.domain + ':' + location.port);

        socket.on('transaction', function (data) {
            var transaction = JSON.parse(data);
            var table = document.getElementById('transaction-table');

            // Create a new row and cells
            var row = table.insertRow(-1);
            var ccNumCell = row.insertCell(0);
            var amtCell = row.insertCell(1);
            var zipCell = row.insertCell(2);
            var latCell = row.insertCell(3);
            var longCell = row.insertCell(4);
            var transNumCell = row.insertCell(5);
            var isFraudCell = row.insertCell(6);
            var transDateCell = row.insertCell(7);
            var transTimeCell = row.insertCell(8);

            // Set the cell values
            ccNumCell.textContent = transaction.cc_num;
            amtCell.textContent = transaction.amt;
            zipCell.textContent = transaction.zip;
            latCell.textContent = transaction.lat;
            longCell.textContent = transaction.long;
            transNumCell.textContent = transaction.trans_num;
            isFraudCell.textContent = transaction.is_fraud;
            transDateCell.textContent = transaction.trans_date;
            transTimeCell.textContent = transaction.trans_time;

            while (table.rows.length > maxTransactions + 1) {  // +1 for the header row
                table.deleteRow(1);  // delete the oldest transaction row, which is after the header row
            }
        });
    </script>
</body>
</html>